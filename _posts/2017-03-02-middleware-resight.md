---
layout: post
title: MiddleWare
categories: Blog
description: MiddleWare
keywords: MiddleWare
---

### 2015赛季

比赛总共分为两道题:"RPC"与"MOM”，两题都需完成。我们会对"RPC"成绩（qps）进行排名，排名前100位的队伍有资格进入MOM的比赛环节，若未进入前100名直接淘汰，最终名次由"MOM"成绩决定 。题目的详细内容请见以下链接，编码统一用utf-8。请严格按照题目要求来实现，如果发现作弊，举办方有权取消参赛者资格，赛题的最终解释权归阿里巴巴集团所有。
RPC题目 http://code.taobao.org/p/race/wiki/index/rpc/ 
RPC的提示 http://code.taobao.org/p/race/wiki/index/rpctips/
MOM题目 http://code.taobao.org/p/race/wiki/index/mom/ 
MOM的提示 http://code.taobao.org/p/race/wiki/index/momtips/ 
最终目录结构:
- trunk
       - rpc
            - build.sh
            - Your code
            - target/lib/*.jar (运行build.sh之后，把所有的依赖都打到这个目录下)
       - mom
            - build.sh
            - broker.sh
            - Your code 
            - target/lib/*.jar 

#### Bonus
一等奖：一支队伍   奖金10万元（含税）＋直通校招终面资格
二等奖：三支队伍   奖金5万元（含税）＋直通校招终面资格
三等奖：五支队伍   奖金3万元（含税）


#### When?
7月19日24点       截止报名
7月20日             公布赛题
7月20日-8月20日    线上赛
8月底             杭州西溪园区现场决赛+颁奖+阿里行


#### How
报名范围：在校大学生
比赛形式：以“队”为单位参赛；自由组队（每队1-3人）


#### Java Only
阿里中间件团队主要使用Java来进行开发，它是一种天然的分布式互联网软件的开发语言，在当今企业级应用中占据绝对领先地位，也是开源世界的顶梁柱，所以我们希望你也能用它来当作你的武器。


---------------------

### 2016赛季

比赛数据预计在5月下旬给出，敬请关注。
比赛环境

开发语言java，依赖管理Maven,JDK7

#### 第一赛季赛题

- 题目：模拟实时统计阿里双十一交易数据
- 赛题描述：我们将脱敏后的双11交易数据存储在RocketMQ中，选手利用JStorm从RocketMQ拉取数据，按照要求实时计算出结果，并将结果写入Tair。我们约定用整分时刻对应的时间戳来标识这一分钟，比如2015/11/11 08:11:00分钟对应的整分时间戳为1447200660，那么我们就用这个时间戳来表示这一分钟，即2015/11/11 08:11:00~2015/11/11 08:12::00(不包含这一时刻)。
- 选手需要计算的统计值如下：
1. 分平台（淘宝、天猫）每分钟的交易金额，即计算每一分钟内的交易值。比如计算2015/11/11 11:11:00这一分钟的淘宝交易金额，就是统计从11:11:00分开始到11:12:00（不包含该时刻）这一分钟内的淘宝的交易总金额；
2. 每整分时刻无线和PC端总交易金额比值；注意这里统计的是整分时刻对应的总交易比值，要将过去发生的所有交易都计算进去。比如计算2015/11/11 11:11:00整分时刻的交易比值，那么需要统计从交易开始时间到2015/11/11 11:12:00（不包含该时刻）这一区间内所有的交易值，来计算无线和PC端的比值；
    最终存储到Tair 中的数据是key-value 的结构，key字符串格式, value是number类型。 key 统一以“固定前缀_整分时间戳”方式命名的字符串，整分时间戳就是整分时刻对应的时间戳，例如2015/11/11 08:11:00分钟对应的时间戳为1447200660(注意是10位数)，即该时刻的整分时间戳。
(1)淘宝每分钟的交易金额的key是“platformTaobao_整分时间戳”，值都是number类型；例如存入Tair的分平台淘宝实时交易金额格式如下：{"platformTaobao_1447200660": 100}
(2)天猫每分钟的交易金额的key是“platformTmall_整分时间戳”，值都是number类型；例如存入Tair的分平台天猫实时交易金额格式如下：{"platformTmall_1447200660": 200}
(3) 每整分时刻无线和PC端总交易金额比值的key为“ratio_整分时间戳”, 值是一个保留两位小数的number类型。例如存入Tair的无线和PC端实时交易金额比值格式如下：{"ratio_1447200660": 2.12}
最终选手提交的代码，会跑在我们后台部署的集群上，我们后台部署的产品版本是：JStorm-2.1.1，RocketMQ-3.2.6，Tair-2.3.4。
 
- 评分标准：
该赛题评判标准依据计平均准确度和平均耗时。
(1) 平均准确度：对每个整分时刻的统计值进行验证，计算每一个统计值的准确度，然后求平均值，得到的就是平均准确度。
(2) 平均耗时：每个统计值的耗时是指从拓扑开始提交，到把这一统计值写入Tair这一时段的时长。我们会计算出每个统计值的耗时，求平均值，得到的就是平均耗时。
优先根据平均准确度对各支队伍进行排名，准确度越高的，排名靠前；准确度一样的再根据平均耗时排名，耗时越短的队伍排名靠前。比赛周期每天给出的排名都是根据每只队列历史最优的成绩进行排名的。最终会筛选出Top100的队伍参加复赛。
 
- 考察点：
（1） 只要满足功能要求即可，让选手自己学会如何使用RocketMQ／JStorm／Tair， 并学会如何搭建这3套系统，如何使用这3件产品；
（2） 可以让选手前期进行自我学习，我们提供模拟交易的数据， 让用户自行下载，自行搭建测试环境。
 
#### 第二赛季赛题

- 题目：交易记录查询

- 赛题描述：天猫与淘宝上每天产生了大量的交易，每一笔交易会生成一条交易记录。现在有许多交易记录文件，文件中每一行视作一条交易记录，每条记录中可能包含若干Key-Value对，这样的key-value对称为属性。文件内的交易记录之间是无序的。你的任务是将这些小文件组织成有序的形式并提供查询接口，供业务方查询。
更多赛题的详细信息请参见： https://code.aliyun.com/MiddlewareRace/order-system。
交易信息：
交易ID | 商品ID | 买家ID	| 交易时间 | 红包金额 | 交易金额
-|-|-|-|-|-|-
10000	| 1001| 	101	| 1460552595| 	0.2	| 188
10001 | 	1001 | 	102| 1460532598| 0.5	| 188
10002	| 1001	| 101| 	1460532500	| 0.6	| 138
10003	| 1002| 	102	| 1460532607| 	| 300
10004| 	1003| 	103	| 1460532608	| |288
10005| 	1001| 	104	| 1460520604	| 0.7	| 20

买家信息：
买家ID| 	姓名	| 收货地址	| 联系电话
-|-|-|-|-
101	| 张三	| 杭州市	| 888886
102	| 李四	| 北京市| 	888887
103	| 王五| 	上海市	| 233-12345
104| 	孙六| 	广州市	| 88888
105	| 杨七| 	香港	| 45678

商品信息：
商品ID|	名称|	卖家ID|	标价|	打折价格
-|-|-|-|-
1001|	洗发水	|301	|188	|38
1002|	沐浴露|	301	|300	
1003|	牙膏	|302	|20	

- 业务方需要选手支持下面几种查询方法：
1、提供交易ID，查询某次交易的某些属性，比如查询某次交易的收货地址以及电话。查询的字段可能不在交易记录中，需要到商品信息或者买家信息中查询。
2、查询某位买家某个时间范围内的所有交易信息，比如查询买家在2016.4.14~2016.4.15之间所有交易的交易ID与交易金额。输出结果按交易时间从大到小排列
3、查询某位卖家的某个商品的全部交易订单，输出结果按交易订单从小到大排序
4、对某个商品的所有交易信息进行求和，比如查询某个卖家商品的折扣券金额总和
 
- 评分标准：
选手程序的运行分为两个阶段，准备阶段与查询阶段。
1、在准备阶段，选手的程序有至多一小时的时间进行数据排序和整理成选手认为最佳的形式，以满足查询的需要。如果超时，则认为程序失败，不计算分数。
2、在查询阶段，测试程序会按照一定的查询操作序列调用程序的查询接口。程序输出结果并比对标准结果，如果结果错误，则认为程序失败，不计算分数。如果一小时内未完成所有查询，那么查询成功的次数会被记录为选手的分数。
如果两阶段均在一小时内完成，那么两阶段的总耗时将会被记录为总分从少到多排名。如果第二阶段未在一小时内完成所有查询，那么完成查询的次数会被记录为分数从高到低并排名，但排名会低于完成第二阶段所有查询的选手。
 
- 比赛帮助文档：
1、Jstorm开发帮助文档：
https://github.com/alibaba/jstorm/wiki/JStorm-Chinese-Documentation
2、Tair开发帮助文档：
http://code.taobao.org/p/tair/wiki/index/
3、RocketMQ 开发帮助文档：
https://github.com/alibaba/RocketMQ


#### 赛事需知

- 第一赛季，7月5日-7月11日
1、第一赛季需要选手学会使用三项技术产品RocketMQ／JStorm／Tair，并搭建这3套系统；选手可下载样本数据，在本地代码编译，提交源代码；
2、7月5日起提供每天1 次的评测和排名机会，系统评测开始时间为10:00 AM，每天更新排行榜，按照评测指标从高到低排序；(排行榜将选择选手在本阶段的历史最优成绩进行排名展示，不做最终排名计算)
3、第一赛季截止时（7月11日10:00AM），最好成绩排名前100名的队伍进入第二赛季。

- 报名及实名认证
1、报名、组队变更和实名认证截止时间均为2016年7月11日00:00 AM；
2、队伍内所有成员完成支付宝实名认证，方可进入正式比赛；
1）如遇到队伍内有成员为海外选手等无法进行支付宝实名认证的情况，请在[个人中心-认证]页面添加ID card并按照提示上传照片。如仍有问题，请联系组委会，官方邮箱：tianchi_bigdata@member.alibaba.com。
2）如队伍内有成员无法继续参赛而未进行实名认证，请及时清理，遇到问题及时联系组委会，官方邮箱：tianchi_bigdata@member.alibaba.com。
3、认证入口：天池网站-个人中心-认证。
 
信息审核，7月11日10:00AM—7月15日12:00AM
组委会将根据选手提交的代码进行信息审核，包括代码筛查。

- 第二赛季，7月19日-8月3日
1、第二赛季选手可以提前从大赛网站上下载样本数据与接口定义，完成代码编写与调试工作。
2、7月19日起提供每天1次的评测和排名机会，选手上传源代码，由天池平台进行编译与评测。评测结束后会返回得分。取历史最高得分作为成绩，每天更新排行榜。
3、 8月1日24点停止更新排行榜，8月2日24点整截止代码提交。8月3日10:00AM公布最终成绩，最好成绩排名前10名将受邀答辩。
总决赛，8月11日
1、材料准备：参与答辩队伍需提前准备评审材料，包括PPT材料、代码；
2、评审会：将以现场答辩会的形式进行，具体安排另行通知；
3、最终排名：组委会将根据参赛队伍的代码、历史成绩、评委打分，角逐出冠亚季军，颁发奖金及证书。
- 参赛对象
面向全社会开放，高等院校、科研单位、互联网企业等人员均可报名参赛。
注：大赛主办和技术支持单位如有机会接触赛题背景业务、产品、数据的员工，则自动退出比赛，放弃参赛资格。
- 组队规则
参赛队伍可以是单人组队，或者自由组合，但是最多不超过三人。
注：
1、每人只能参加一支队伍；
2、保证参赛队员报名信息准确有效，否则会被取消参赛资格及激励；
3、报名、组队变更和实名认证截止时间均为2016年7月11日00:00 AM；
4、报名方式：用淘宝或阿里云账号登入官网，完成个人信息注册，即可报名参赛。
5、2016阿里中间件性能挑战赛官方交流群，旺旺群：1251809708
奖项设置
冠军：1支队伍，奖金拾万，颁发获奖证书
亚军：2支队伍，奖金伍万，颁发获奖证书
季军：3支队伍，奖金叁万，颁发获奖证书
优胜奖：4支队伍，奖品一份，颁发获奖证书
（上述奖项以总决赛答辩的最终名次决定，第二赛季TOP10主要参赛选手可入围阿里校招绿色通道）

- 极客奖：第二赛季总决赛排名TOP20选手获得极客奖证书，获入围阿里巴巴校园招聘绿色通道（即招聘流程省略简历筛选及笔试筛选阶段，直接进入面试阶段，在校期间均有效）；
 
- 天池粮票发放
在赛季中产出过成绩的队伍，根据该赛季最终排名获得相应排名的粮票奖励；激励标准：
第1-10名队伍：11000粮票
第10-50名队伍：2500 粮票
第50-100名队伍：1200粮票
分配方式：若队伍由多人组成，粮票最终将平均分配。
发放时间：第二赛季截止后的两周内完成发放。
粮票可兑换天池纪念品

---------
### 总结

#### 赛事题目
2015年比赛重点主要是自主研发中间件框架
2016年比赛重点主要是熟悉对中间件的使用以及能优化代码

#### 时间安排
虽然比赛都是7-8月份，不过 基本上4-5月份就会给出题目，届时论坛上就有很多人开始讨论了相关事项
